name: test matrix

on:
  workflow_dispatch:

jobs:
  test-matrix:
    uses: leonrado/github-action-test/.github/workflows/manage-sql-instances.yml@main
    with:
      instances: ${{ matrix.instances }}
      action: ${{ matrix.action }}
      env: ${{ matrix.env }}
    strategy:
      matrix:
        # Defina as combinações de ambiente, ação e horários
        include:
          # Parar DEV
          - env: DEV
            instances: 
             - dev-instance-1
             - dev-instance-2     
            action: stop
            cron: '0 20 * * *'
          # Iniciar DEV
          - env: DEV
            instances: [dev-instance-1, dev-instance-2]
            action: start
            cron: '*/3 * * * *'
          # Parar UAT
          - env: UAT
            instances: [uat-instance-1, uat-instance-2]
            action: stop
            cron: '*/2 * * * *'
